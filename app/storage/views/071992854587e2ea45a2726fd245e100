<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>
        jQuery(document).ready(function($) {
            $('#state').change(function(){
                $.get("<?php echo url('api/getcourts'); ?>", { option: $('#state').val() },
                        function(data) {
                            var numbers = $('#court');
                            numbers.empty();
                            $.each(data, function(key, value) {
                                numbers .append($("<option></option>")
                                        .attr("value",key)
                                        .text(value));
                            });
                        });
            });
        });
    </script>
</head>
<body>
<h1>Create New Order</h1>


<?php echo Form::open(['route' => 'orders.store']); ?>

	<div>
	<?php echo Form::label('plaintiff', 'Plaintiff: '); ?>

	<?php echo Form::text('plaintiff'); ?>

	<?php echo $errors->first('plaintiff'); ?>

	</div>
		<div>
	<?php echo Form::label('defendant', 'Defendant: '); ?>

	<?php echo Form::text('defendant'); ?>

	<?php echo $errors->first('defendant'); ?>

	</div>
		<div>
	<?php echo Form::label('case', 'Court Case: '); ?>

	<?php echo Form::text('case'); ?>

	<?php echo $errors->first('case'); ?>

	</div>
			<div>
	<?php echo Form::label('reference', 'Reference: '); ?>

	<?php echo Form::text('reference'); ?>

	<?php echo $errors->first('reference'); ?>

	</div>

	<div>
	<?php echo Form::label('state', 'State: '); ?>

	<?php echo Form::select('state', $states, null, ['id' => 'state']); ?>

	<?php echo $errors->first('state'); ?>

	</div>
<div class="row">
    <div class="large-9 columns">
        <label for="court">Court:</label>
        <select id="court" name="court">
        </select>
		<?php echo $errors->first('court'); ?>

	</div>
</div>
    	<div>
	<?php echo Form::label('services', 'Services: '); ?>

	<?php echo Form::label('filing', 'Filing: '); ?>

	<?php echo Form::select('filing', array(''=>'','Routine' => 'Routine', 'Rush' => 'Rush', 'SameDay' => 'Same Day')); ?>

	<?php echo Form::label('recording', 'Recording: '); ?>

	<?php echo Form::select('recording', array(''=>'','Routine' => 'Routine', 'Rush' => 'Rush', 'SameDay' => 'Same Day')); ?>

	<?php echo $errors->first('services'); ?><p>
	</div>
<div>

    <?php echo Form::label('Documents Served', 'Documents Served: '); ?><br>

    <?php foreach($documents as $document): ?>

    <?php echo Form::checkbox($document[0], $document[1]); ?>

    <?php echo Form::label($document[1],  $document[1]); ?><br>
    <?php endforeach; ?>
    <?php echo $errors->first('documentsServed'); ?><p>
</div>
<?php if(Auth::user()->user_role=='Admin'): ?>
    	<?php echo Form::label('company', 'Client: '); ?>

	<?php echo Form::select('company', $company); ?>

	<?php echo $errors->first('company'); ?><p>
<?php else: ?>
	<?php echo Form::hidden('company', $company); ?>

<?php endif; ?>

    <?php foreach($documents as $document): ?>
   <?php echo '<input type="hidden" name="documents[]" value="'. $document[0]. '">'; ?>

    <?php endforeach; ?>

<h1>Add New Defendant</h1>
<div>
	<?php echo Form::label('type', 'Service Type: '); ?>

	<?php echo Form::label('type', 'Process Service', true); ?>

	<?php echo Form::radio('service[type]', 'Process Service', true); ?>

	<?php echo Form::label('type', 'Property Posting'); ?>

	<?php echo Form::radio('service[type]', 'Property Posting'); ?>

	<?php echo Form::label('priority', 'Priority: '); ?>

	<?php echo Form::select('service[posting]', array(''=>'','Routine' => 'Routine', 'Rush' => 'Rush', 'SameDay' => 'Same Day')); ?><p>
</div>
<div>
	<?php echo Form::label('defendant', 'Defendant: '); ?>

	<?php echo Form::text('service[defendant]'); ?>

	<?php echo $errors->first('defendant'); ?>

</div>
<div>
	<?php echo Form::label('street', 'Street: '); ?>

	<?php echo Form::text('service[street]'); ?>

	<?php echo $errors->first('street'); ?>

</div>
<div>
	<?php echo Form::label('street2', 'Apt/Unit/Suite: '); ?>

	<?php echo Form::text('service[street2]'); ?>

	<?php echo $errors->first('street2'); ?>

</div>
<div>
	<?php echo Form::label('city', 'City: '); ?>

	<?php echo Form::text('service[city]'); ?>

	<?php echo $errors->first('city'); ?>

</div>
<div>
	<?php echo Form::label('state', 'State: '); ?>

	<?php echo Form::select('service[state]', $states, null, ['id' => 'state']); ?>

	<?php echo $errors->first('state'); ?>

</div>
<div>
	<?php echo Form::label('zipcode', 'Zip Code: '); ?>

	<?php echo Form::text('service[zipcode]'); ?>

	<?php echo $errors->first('zipcode'); ?>

</div>
<div>
	<?php echo Form::label('notes', 'Notes to Server: '); ?>

	<?php echo Form::textarea('service[notes]'); ?>

	<?php echo $errors->first('notes'); ?><p>
</div>

	<div><?php echo Form::submit('Create Order'); ?><?php echo Form::reset('Reset'); ?></div>
<?php echo Form::close(); ?>

<a href="<?php echo URL::previous(); ?>">Go Back</a>

</body>
</html>
